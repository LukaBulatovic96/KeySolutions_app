(function(e){function t(t){for(var r,u,o=t[0],s=t[1],i=t[2],d=0,f=[];d<o.length;d++)u=o[d],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&f.push(a[u][0]),a[u]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var o=n[u];0!==a[o]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},u={app:0},a={app:0},c=[];function o(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-1f000275":"21b8f3ad","chunk-2d2077a9":"5dd5246f","chunk-2d22d746":"8aa3954b","chunk-73e8ca3c":"8eb44dfa","chunk-789f0311":"02e009cc","chunk-95357c76":"7546420d","chunk-ed818828":"cba3303a"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-73e8ca3c":1,"chunk-789f0311":1,"chunk-95357c76":1,"chunk-ed818828":1};u[e]?t.push(u[e]):0!==u[e]&&n[e]&&t.push(u[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-1f000275":"31d6cfe0","chunk-2d2077a9":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-73e8ca3c":"d5ddf541","chunk-789f0311":"a3ddd777","chunk-95357c76":"02e25415","chunk-ed818828":"d1aef540"}[e]+".css",a=s.p+r,c=document.getElementsByTagName("link"),o=0;o<c.length;o++){var i=c[o],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===r||d===a))return t()}var f=document.getElementsByTagName("style");for(o=0;o<f.length;o++){i=f[o],d=i.getAttribute("data-href");if(d===r||d===a)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete u[e],l.parentNode.removeChild(l),n(c)},l.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(l)})).then((function(){u[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=c);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=o(e);var f=new Error;i=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),u=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+u+")",f.name="ChunkLoadError",f.type=r,f.request=u,n[1](f)}a[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var f=0;f<i.length;f++)t(i[f]);var l=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"474f":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),u={id:"app"},a={class:"container"};function c(e,t,n,c,o,s){var i=Object(r["y"])("Navbar"),d=Object(r["y"])("router-view");return Object(r["r"])(),Object(r["f"])("div",u,[Object(r["i"])(i),Object(r["g"])("div",a,[Object(r["i"])(d)])])}var o={class:"navbar navbar-expand-lg navbar-dark bg-dark"},s={class:"container-fluid"},i=Object(r["h"])("KeySolutions"),d=Object(r["h"])("Login"),f=Object(r["h"])("Register"),l=Object(r["h"])("Profile"),b=Object(r["h"])("VQTest"),p=Object(r["h"])("Test results"),m=Object(r["h"])("Test Administration");function h(e,t,n,u,a,c){var h=Object(r["y"])("router-link");return Object(r["r"])(),Object(r["f"])("nav",o,[Object(r["g"])("div",s,[Object(r["i"])(h,{class:"navbar-brand",to:"/"},{default:Object(r["F"])((function(){return[i]})),_:1}),e.isLoggedIn?Object(r["e"])("",!0):(Object(r["r"])(),Object(r["d"])(h,{key:0,class:"navbar-brand",to:"/login"},{default:Object(r["F"])((function(){return[d]})),_:1})),e.isLoggedIn?Object(r["e"])("",!0):(Object(r["r"])(),Object(r["d"])(h,{key:1,class:"navbar-brand",to:"/register"},{default:Object(r["F"])((function(){return[f]})),_:1})),e.isLoggedIn?(Object(r["r"])(),Object(r["d"])(h,{key:2,class:"navbar-brand",to:"/profile"},{default:Object(r["F"])((function(){return[l]})),_:1})):Object(r["e"])("",!0),e.isLoggedIn&&!e.isAdmin?(Object(r["r"])(),Object(r["d"])(h,{key:3,class:"navbar-brand",to:"/vqtest"},{default:Object(r["F"])((function(){return[b]})),_:1})):Object(r["e"])("",!0),e.isAdmin?(Object(r["r"])(),Object(r["d"])(h,{key:4,class:"navbar-brand",to:"/results"},{default:Object(r["F"])((function(){return[p]})),_:1})):Object(r["e"])("",!0),e.isAdmin?(Object(r["r"])(),Object(r["d"])(h,{key:5,class:"navbar-brand",to:"/admin"},{default:Object(r["F"])((function(){return[m]})),_:1})):Object(r["e"])("",!0),Object(r["g"])("a",{to:"/logout",class:"nav-link",onClick:t[0]||(t[0]=Object(r["H"])((function(){return c.logoutUser&&c.logoutUser.apply(c,arguments)}),["prevent"]))}," Logout ")])])}var g=n("5530"),v=n("5502"),O={computed:Object(g["a"])({},Object(v["c"])(["isLoggedIn","isAdmin"])),methods:Object(g["a"])(Object(g["a"])({},Object(v["b"])(["logout"])),{},{logoutUser:function(){this.logout()}})};O.render=h;var j=O,k={components:{Navbar:j}};n("ab0f");k.render=c;var y=k,q=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),w={class:"home"},_=Object(r["g"])("div",{class:""},[Object(r["g"])("h1",null,"Landing page")],-1),A=[_];function x(e,t,n,u,a,c){return Object(r["r"])(),Object(r["f"])("div",w,A)}var L={name:"Home",components:{}};L.render=x;var P=L,R=n("1da1"),S=(n("96cf"),n("bc3a")),I=n.n(S),T={token:localStorage.getItem("token")||"",user:{},status:"",vqtests:{}},E={vqtests:function(e){return e.vqtests},isAdmin:function(e){return"admin"==e.user.type},isLoggedIn:function(e){return!!e.token},authState:function(e){return e.status},user:function(e){return e.user}},C={login:function(e,t){return Object(R["a"])(regeneratorRuntime.mark((function n(){var r,u,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("auth_request"),n.next=4,I.a.post("/api/users/login",t);case 4:return u=n.sent,u.data.success&&(a=u.data.token,c=u.data.user,localStorage.setItem("token",a),I.a.defaults.headers.common["Authorization"]=a,r("auth_success",a,c)),n.abrupt("return",u);case 7:case"end":return n.stop()}}),n)})))()},register:function(e,t){return Object(R["a"])(regeneratorRuntime.mark((function n(){var r,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("register_request"),n.next=4,I.a.post("/api/users/register",t);case 4:return u=n.sent,void 0!==u.data.success&&r("register_success"),n.abrupt("return",u);case 7:case"end":return n.stop()}}),n)})))()},getProfile:function(e){return Object(R["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("profile_request"),t.next=4,I.a.get("/api/users/profile");case 4:return r=t.sent,n("profile_present",r.data.user),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},logout:function(e){return Object(R["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,localStorage.removeItem("token");case 3:return n("logout"),delete I.a.defaults.headers.common["Authorization"],M.push("/login"),t.abrupt("return");case 7:case"end":return t.stop()}}),t)})))()},submitVQ:function(e,t){return Object(R["a"])(regeneratorRuntime.mark((function n(){var r,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("vq_request"),n.next=4,I.a.post("/api/vqtests/submit",t);case 4:return u=n.sent,void 0!==u.data.success&&r("submitVQ_success"),n.abrupt("return",u);case 7:case"end":return n.stop()}}),n)})))()},getVQTests:function(e){return Object(R["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("vqtests_request"),t.next=4,I.a.get("/api/vqtests/getAll");case 4:return r=t.sent,n("vqtests",r.data),console.log(r.data),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})))()}},F={auth_request:function(e){e.status="loading"},auth_success:function(e,t,n){e.token=t,e.user=n,e.status="success"},register_request:function(e){e.status="loading"},register_success:function(e){e.status="success"},logout:function(e){e.status="",e.token="",e.user=""},profile_request:function(e){e.status="loading"},profile_present:function(e,t){e.user=t},vq_request:function(e){e.status="loading"},submitVQ_success:function(e){e.status="success"},vqtests_request:function(e){e.status="loading"},vqtests:function(e,t){e.vqtests=t,e.status="success"}},N={state:T,actions:C,mutations:F,getters:E},V=Object(v["a"])({state:{},mutations:{},actions:{},modules:{Auth:N}}),Q=[{path:"/",name:"Home",component:P},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/login",name:"Login",component:function(){return n.e("chunk-789f0311").then(n.bind(null,"a55b"))},meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:function(){return n.e("chunk-73e8ca3c").then(n.bind(null,"73cf"))},meta:{requiresGuest:!0}},{path:"/profile",name:"Profile",component:function(){return n.e("chunk-95357c76").then(n.bind(null,"c66d"))},meta:{requiresAuth:!0}},{path:"/vqtest",name:"Vqtest",component:function(){return n.e("chunk-1f000275").then(n.bind(null,"7f00"))},meta:{requiresAuth:!0}},{path:"/admin",name:"AdminPage",component:function(){return n.e("chunk-2d2077a9").then(n.bind(null,"a169"))},meta:{requiresAuth:!0}},{path:"/results",name:"AdminPage",component:function(){return n.e("chunk-ed818828").then(n.bind(null,"c36d"))},meta:{requiresAuth:!0}}],H=Object(q["a"])({history:Object(q["b"])("/"),routes:Q});H.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))?V.getters.isLoggedIn?n():n("/login"):e.matched.some((function(e){return e.meta.requiresGuest}))&&V.getters.isLoggedIn?n("/profile"):n()}));var M=H;Object(r["c"])(y).use(V).use(M).mount("#app")},ab0f:function(e,t,n){"use strict";n("474f")}});
//# sourceMappingURL=app.d87cab56.js.map